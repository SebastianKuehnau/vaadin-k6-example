// Generated by Grafana k6 Studio (1.10.0) on 2026-01-28T16:18:02.274Z
//
// ADVANCED RECORDED SCRIPT (Hard-coded version)
// ==============================================
// This script tests a Vaadin application with hard-coded session values.
// It performs the following user journey:
//   1. HelloWorld View: Enter name and click "Say Hello" button
//   2. CRUD Example View: Select rows, edit names, save/cancel changes
//   3. Advanced View: Perform drag-and-drop operations
//
// NOTE: This version uses hard-coded values for:
//   - JSESSIONID (jSessionId)
//   - CSRF Token (csrfToken)
//   - UI ID (uiId)
//   - Push ID (pushId)
// These must be replaced with actual values or use the correlated version instead.

import {group, sleep, check} from "k6";
import http from "k6/http";
import execution from "k6/execution";

export const options = {
    stages: [
        {target: 20, duration: "1m"},
        {target: 20, duration: "3m30s"},
        {target: 0, duration: "1m"},
    ],
};

export default function () {
    let params;
    let resp;
    let match;
    let regex;
    let url;
    const correlation_vars = {};

    group("Default group", function () {
        // ===========================================
        // SECTION 1: Application Initialization
        // ===========================================

        // Request 1: Load the application's main page (initial HTML)
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Upgrade-Insecure-Requests": `1`,
                Accept: `text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/`;
        resp = http.request("GET", url, null, params);

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 2: Vaadin bootstrap/init request - sends browser details (screen size, timezone, theme)
        // This initializes the Vaadin UI session on the server
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                Accept: `*/*`,
                Referer: `${base_url}/`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=init&location=&query=&v-browserDetails=%7B%22v-sh%22%3A%222160%22%2C%22v-sw%22%3A%223840%22%2C%22v-wh%22%3A%221934%22%2C%22v-ww%22%3A%221200%22%2C%22v-bh%22%3A%221934%22%2C%22v-bw%22%3A%221200%22%2C%22v-curdate%22%3A%221769617018617%22%2C%22v-tzo%22%3A%22-60%22%2C%22v-dstd%22%3A%2260%22%2C%22v-rtzo%22%3A%22-60%22%2C%22v-dston%22%3A%22false%22%2C%22v-tzid%22%3A%22Europe%2FBerlin%22%2C%22v-wn%22%3A%22v-0.2804921536505711%22%2C%22v-td%22%3A%22false%22%2C%22v-pr%22%3A%221%22%2C%22v-np%22%3A%22MacIntel%22%2C%22v-cs%22%3A%22light%22%2C%22v-tn%22%3A%22lumo%22%7D`;
        resp = http.request("GET", url, null, params);

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 3: Initial navigation event - navigate to root route ("")
        // This tells the server which view to render (HelloWorld view)
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":1,"event":"ui-navigate","data":{"route":"","query":"","appShellTitle":"","historyState":{"idx":0},"trigger":""}}],"syncId":0,"clientId":0}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 4: AppLayout initialization - sync drawer state and navigation items
        // Sets drawer as opened, syncs collapsed/expanded state of nav items
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":25,"event":"primary-section-changed","data":{}},{"type":"event","node":25,"event":"drawer-opened-changed","data":{}},{"type":"event","node":25,"event":"overlay-changed","data":{}},{"type":"event","node":20,"event":"collapsed-changed","data":{}},{"type":"event","node":19,"event":"expanded-changed","data":{}},{"type":"event","node":16,"event":"expanded-changed","data":{}},{"type":"event","node":13,"event":"expanded-changed","data":{}},{"type":"mSync","node":25,"feature":1,"property":"drawerOpened","value":true},{"type":"mSync","node":25,"feature":1,"property":"overlay","value":false},{"type":"mSync","node":20,"feature":1,"property":"collapsed","value":false},{"type":"mSync","node":19,"feature":1,"property":"expanded","value":false},{"type":"mSync","node":16,"feature":1,"property":"expanded","value":false},{"type":"mSync","node":13,"feature":1,"property":"expanded","value":false}],"syncId":1,"clientId":1}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 5: Navigation item expand/collapse state change
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":19,"event":"expanded-changed","data":{}},{"type":"event","node":19,"event":"expanded-changed","data":{}}],"syncId":2,"clientId":2}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // ===========================================
        // SECTION 2: HelloWorld View Interaction
        // ===========================================

        // Request 6: Type "Seb" into the name text field
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"mSync","node":6,"feature":1,"property":"value","value":"Seb"},{"type":"event","node":6,"event":"change","data":{}}],"syncId":3,"clientId":3}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 7: Click the "Say Hello" button
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":5,"event":"click","data":{"event.shiftKey":false,"event.metaKey":false,"event.detail":1,"event.ctrlKey":false,"event.clientX":519,"event.clientY":118,"event.altKey":false,"event.button":0,"event.screenY":257,"event.screenX":541}}],"syncId":4,"clientId":4}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 8: Notification/dialog opened (shows "Hello Seb" message)
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":27,"event":"opened-changed","data":{}}],"syncId":5,"clientId":5}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // ===========================================
        // SECTION 3: Navigate to CRUD Example View
        // ===========================================

        // Request 9: Navigate to the CRUD Example view (route: "crud-example")
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":1,"event":"ui-navigate","data":{"route":"crud-example","query":"","appShellTitle":"","historyState":{"idx":0},"trigger":"client"}}],"syncId":6,"clientId":6}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 10: CRUD view initialization - Grid checkbox state and initial data update
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":39,"event":"value-changed","data":{}},{"type":"event","node":36,"event":"checked-changed","data":{}},{"type":"event","node":36,"event":"indeterminate-changed","data":{}},{"type":"publishedEventHandler","node":55,"templateEventMethodName":"confirmUpdate","templateEventMethodArgs":[0],"promise":0}],"syncId":7,"clientId":7}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 11: Expand a navigation section in the sidebar
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":16,"event":"expanded-changed","data":{}}],"syncId":8,"clientId":8}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 12: Grid lazy loading - set viewport range (rows 0-150)
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"publishedEventHandler","node":55,"templateEventMethodName":"setViewportRange","templateEventMethodArgs":[0,150],"promise":1}],"syncId":9,"clientId":9}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 13: Confirm grid data update after viewport change
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"publishedEventHandler","node":55,"templateEventMethodName":"confirmUpdate","templateEventMethodArgs":[1],"promise":2}],"syncId":10,"clientId":10}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // ===========================================
        // SECTION 4: Edit First Person (Row 1)
        // ===========================================

        // Request 14: Select row 1 in the grid and show details panel
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"publishedEventHandler","node":55,"templateEventMethodName":"select","templateEventMethodArgs":["1"],"promise":3},{"type":"publishedEventHandler","node":55,"templateEventMethodName":"setDetailsVisible","templateEventMethodArgs":["1"],"promise":4}],"syncId":11,"clientId":11}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 15: Form field value changed event (form populated with person data)
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":39,"event":"value-changed","data":{}}],"syncId":12,"clientId":12}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 16: Close the notification/drawer that was opened
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example/1/edit`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"mSync","node":27,"feature":1,"property":"opened","value":false},{"type":"event","node":27,"event":"opened-changed","data":{}}],"syncId":13,"clientId":13}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 17: Notification closed event confirmation
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example/1/edit`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":27,"event":"closed"}],"syncId":14,"clientId":14}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 18: Edit first name field - change value to "Eula2"
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example/1/edit`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"mSync","node":43,"feature":1,"property":"value","value":"Eula2"},{"type":"event","node":43,"event":"change","data":{}}],"syncId":15,"clientId":15}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 19: Click the Save button to save changes
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example/1/edit`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":30,"event":"click","data":{"event.shiftKey":false,"event.metaKey":false,"event.detail":1,"event.ctrlKey":false,"event.clientX":1154,"event.clientY":1883,"event.altKey":false,"event.button":0,"event.screenY":2022,"event.screenX":1176}}],"syncId":16,"clientId":16}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 20: Save completed - hide details panel and refresh grid
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example/1/edit`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":39,"event":"value-changed","data":{}},{"type":"publishedEventHandler","node":55,"templateEventMethodName":"setDetailsVisible","templateEventMethodArgs":[null],"promise":5},{"type":"publishedEventHandler","node":55,"templateEventMethodName":"confirmUpdate","templateEventMethodArgs":[2],"promise":6}],"syncId":17,"clientId":17}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 21: Expand navigation section
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":16,"event":"expanded-changed","data":{}}],"syncId":18,"clientId":18}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // ===========================================
        // SECTION 5: Edit Second Person (Row 2) - First Edit
        // ===========================================

        // Request 22: Select row 2 in the grid and show details panel
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"publishedEventHandler","node":55,"templateEventMethodName":"select","templateEventMethodArgs":["2"],"promise":7},{"type":"publishedEventHandler","node":55,"templateEventMethodName":"setDetailsVisible","templateEventMethodArgs":["2"],"promise":8}],"syncId":19,"clientId":19}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 23: Form field value changed (form populated with row 2 data)
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":39,"event":"value-changed","data":{}}],"syncId":20,"clientId":20}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 24: Edit first name field - change value to "Barry2"
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example/2/edit`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"mSync","node":43,"feature":1,"property":"value","value":"Barry2"},{"type":"event","node":43,"event":"change","data":{}}],"syncId":21,"clientId":21}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 25: Click the Cancel button to discard changes
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example/2/edit`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":32,"event":"click","data":{"event.shiftKey":false,"event.metaKey":false,"event.detail":1,"event.ctrlKey":false,"event.clientX":1060,"event.clientY":1879,"event.altKey":false,"event.button":0,"event.screenY":2018,"event.screenX":1082}}],"syncId":22,"clientId":22}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 26: Cancel completed - hide details, show notification, refresh grid
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example/2/edit`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":39,"event":"value-changed","data":{}},{"type":"event","node":59,"event":"opened-changed","data":{}},{"type":"publishedEventHandler","node":55,"templateEventMethodName":"setDetailsVisible","templateEventMethodArgs":[null],"promise":9},{"type":"publishedEventHandler","node":55,"templateEventMethodName":"confirmUpdate","templateEventMethodArgs":[3],"promise":10}],"syncId":23,"clientId":23}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 27: Expand navigation section
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":16,"event":"expanded-changed","data":{}}],"syncId":24,"clientId":24}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // ===========================================
        // SECTION 6: Edit Second Person (Row 2) - Second Edit
        // ===========================================

        // Request 28: Select row 2 again and show details
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"publishedEventHandler","node":55,"templateEventMethodName":"select","templateEventMethodArgs":["2"],"promise":11},{"type":"publishedEventHandler","node":55,"templateEventMethodName":"setDetailsVisible","templateEventMethodArgs":["2"],"promise":12}],"syncId":25,"clientId":25}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 29: Form field value changed
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":39,"event":"value-changed","data":{}}],"syncId":26,"clientId":26}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 30: Close the notification from previous cancel operation
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example/2/edit`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"mSync","node":59,"feature":1,"property":"opened","value":false},{"type":"event","node":59,"event":"opened-changed","data":{}}],"syncId":27,"clientId":27}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 31: Notification closed event
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example/2/edit`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":59,"event":"closed"}],"syncId":28,"clientId":28}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 32: Edit first name field - change value to "Barry"
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example/2/edit`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"mSync","node":43,"feature":1,"property":"value","value":"Barry"},{"type":"event","node":43,"event":"change","data":{}}],"syncId":29,"clientId":29}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 33: Click the Cancel button again
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example/2/edit`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":32,"event":"click","data":{"event.shiftKey":false,"event.metaKey":false,"event.detail":1,"event.ctrlKey":false,"event.clientX":1050,"event.clientY":1878,"event.altKey":false,"event.button":0,"event.screenY":2017,"event.screenX":1072}}],"syncId":30,"clientId":30}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 34: Cancel completed - hide details, show notification, refresh grid
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example/2/edit`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":39,"event":"value-changed","data":{}},{"type":"event","node":60,"event":"opened-changed","data":{}},{"type":"publishedEventHandler","node":55,"templateEventMethodName":"setDetailsVisible","templateEventMethodArgs":[null],"promise":13},{"type":"publishedEventHandler","node":55,"templateEventMethodName":"confirmUpdate","templateEventMethodArgs":[4],"promise":14}],"syncId":31,"clientId":31}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 35: Expand navigation section
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":16,"event":"expanded-changed","data":{}}],"syncId":32,"clientId":32}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // ===========================================
        // SECTION 7: Navigate to Advanced View
        // ===========================================

        // Request 36: Navigate to the Advanced view (route: "advanced")
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/crud-example`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":1,"event":"ui-navigate","data":{"route":"advanced","query":"","appShellTitle":"","historyState":{"usr":null,"key":"wmprmgoy","idx":9},"trigger":"client"}}],"syncId":33,"clientId":33}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 37: Expand navigation item in Advanced view
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/advanced`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":13,"event":"expanded-changed","data":{}}],"syncId":34,"clientId":34}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 38: Click a button in the Advanced view
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/advanced`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":80,"event":"click","data":{"event.shiftKey":false,"event.metaKey":false,"event.detail":1,"event.ctrlKey":false,"event.clientX":385,"event.clientY":137,"event.altKey":false,"event.button":0,"event.screenY":276,"event.screenX":407}}],"syncId":38,"clientId":35}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // ===========================================
        // SECTION 8: Drag and Drop Operations
        // ===========================================

        // Request 39: First drag operation starts (drag item from source)
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/advanced`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":69,"event":"dragstart"}],"syncId":40,"clientId":36}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 40: Close notification from previous CRUD view
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/advanced`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"mSync","node":60,"feature":1,"property":"opened","value":false},{"type":"event","node":60,"event":"opened-changed","data":{}}],"syncId":42,"clientId":37}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 41: Notification closed event
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/advanced`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":60,"event":"closed"}],"syncId":43,"clientId":38}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 42: First drag operation completes - drop item on target
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/advanced`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":63,"event":"drop","data":{"event.dataTransfer.effectAllowed":"all"}},{"type":"event","node":69,"event":"dragend","data":{"event.dataTransfer.dropEffect":"copy"}}],"syncId":45,"clientId":39}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 43: First drop notification opens (success message)
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/advanced`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":86,"event":"opened-changed","data":{}}],"syncId":46,"clientId":40}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 44: Second drag operation starts
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/advanced`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":65,"event":"dragstart"}],"syncId":48,"clientId":41}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 45: Second drag operation completes - drop item on target
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/advanced`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":63,"event":"drop","data":{"event.dataTransfer.effectAllowed":"all"}},{"type":"event","node":65,"event":"dragend","data":{"event.dataTransfer.dropEffect":"copy"}}],"syncId":50,"clientId":42}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 46: Second drop notification opens
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/advanced`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":87,"event":"opened-changed","data":{}}],"syncId":51,"clientId":43}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 47: Third drag operation starts
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/advanced`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":67,"event":"dragstart"}],"syncId":54,"clientId":44}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 48: Third drag operation completes - drop item on target
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/advanced`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":63,"event":"drop","data":{"event.dataTransfer.effectAllowed":"all"}},{"type":"event","node":67,"event":"dragend","data":{"event.dataTransfer.dropEffect":"copy"}}],"syncId":57,"clientId":45}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 49: Third drop notification opens
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/advanced`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":88,"event":"opened-changed","data":{}}],"syncId":58,"clientId":46}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // ===========================================
        // SECTION 9: Close All Notifications
        // ===========================================

        // Request 50: Close first drop notification
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/advanced`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"mSync","node":86,"feature":1,"property":"opened","value":false},{"type":"event","node":86,"event":"opened-changed","data":{}}],"syncId":64,"clientId":47}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 51: First notification closed event
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/advanced`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":86,"event":"closed"}],"syncId":65,"clientId":48}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 52: Close second drop notification
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/advanced`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"mSync","node":87,"feature":1,"property":"opened","value":false},{"type":"event","node":87,"event":"opened-changed","data":{}}],"syncId":68,"clientId":49}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 53: Second notification closed event
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/advanced`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"event","node":87,"event":"closed"}],"syncId":70,"clientId":50}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 54: Close third drop notification
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-type": `application/json; charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/advanced`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[{"type":"mSync","node":88,"feature":1,"property":"opened","value":false},{"type":"event","node":88,"event":"opened-changed","data":{}}],"syncId":74,"clientId":51}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // ===========================================
        // SECTION 10: Session Cleanup
        // ===========================================

        // Request 55: Send UNLOAD signal - notify server that user is leaving the page
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-Type": `text/plain;charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/advanced`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/?v-r=uidl&v-uiId=${uiId}`;
        resp = http.request(
            "POST",
            url,
            `{"csrfToken":"${csrfToken}","rpc":[],"UNLOAD":true}`,
            params,
        );

        check(resp, {"status equals 200": (r) => r.status === 200});

        // Request 56: Close the Vaadin Push/Atmosphere WebSocket connection
        params = {
            headers: {
                "Proxy-Connection": `keep-alive`,
                "Content-Type": `text/plain;charset=UTF-8`,
                Accept: `*/*`,
                Origin: `${base_url}`,
                Referer: `${base_url}/advanced`,
                "Accept-Encoding": `gzip, deflate`,
                "Accept-Language": `en-GB,en-US;q=0.9,en;q=0.8`,
            },
            cookies: {
                "JSESSIONID": `${jSessionId}`
            },
        };

        url = http.url`${base_url}/VAADIN/push?v-r=push&v-uiId=${uiId}&v-pushId=${pushId}&X-Atmosphere-Transport=close&X-Atmosphere-tracking-id=7b91d235-43ad-43f1-b019-c2e9f98c7f51&X-Vaadin-LastSeenServerSyncId=75`;
        resp = http.request("POST", url, null, params);

        check(resp, {"status equals 200": (r) => r.status === 200});
    });
    sleep(1);
}